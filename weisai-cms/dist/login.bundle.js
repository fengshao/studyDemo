webpackJsonp([16],{0:function(e,t,n){n(237),e.exports=n(335)},250:function(e,t,n){t=e.exports=n(71)(),t.push([e.id,"body{background:transparent url("+n(522)+") no-repeat center 100px;background-size:15%}.loginform{position:absolute;top:300px;left:50%;margin-left:-250px}.loginform button{background:blue}",""])},335:function(e,t,n){(function(e,t,o){try{(function(){"use strict";n(521),n(236);var r=n(363),a=n(8);a.userIsLogin().then(function(n){!n||1!=n.user_role&&3!=n.user_role?e.render(t.createElement(r,null),o("#main")[0]):(window.sessionStorage.setItem("user_role",n.user_role),window.location.href="/local_home.html")},function(n){e.render(t.createElement(r,null),o("#main")[0])})}).call(this)}finally{}}).call(t,n(55),n(2),n(4))},363:function(e,t,n){(function(t,o){try{(function(){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(3),i=a.Form.Item,s=t.createClass({displayName:"Demo",handleSubmit:function(e){var t=this;e.preventDefault(),this.props.form.validateFields(function(e,n){e||t.loginFnc(n)})},loginFnc:function(e){var t=window.location.href.split("#")[0],n="//topics-cms.intra.wesai.com/api/login";t.indexOf("devel")!=-1?n="//topics-cms.devel.wesai.com/api/login":t.indexOf("test")!=-1?n="//topics-cms.test.wesai.com/api/login":t.indexOf("127.0.0.1")!=-1&&(n="//periphery.devel.wesai.com/api/login");var r=a.message.loading("正在登录，请稍后...",0);o.ajax({type:"post",xhrFields:{withCredentials:!0},crossDomain:!0,data:e,url:n,success:function(t){r(),0==t.code?!function(){window.sessionStorage.setItem("username",e.name),window.sessionStorage.setItem("user_role",t.data.user_role);var n=a.message.loading("登录成功，正在跳转...",0);setTimeout(function(){n(),window.location.href="/local_home.html"},2500)}():a.message.error(t.detail?t.detail:"登录失败，请重试")},error:function(e){r(),a.message.error(e.detail?e.detail:"登录失败，请重试")}})},render:function(){var e=this.props.form,n=e.getFieldProps,o=e.getFieldError,s=e.isFieldValidating,l=n("name",{rules:[{required:!0,message:"用户名不能为空"}]}),c=n("password",{rules:[{required:!0,message:"密码不能为空"}]});return t.createElement(a.Form,{inline:!0,onSubmit:this.handleSubmit,className:"loginform"},t.createElement(i,{label:"用户名",hasFeedback:!0,help:s("name")?"校验中...":(o("name")||[]).join(", ")},t.createElement(a.Input,r({placeholder:"请输入用户名",defaultValue:"admin"},l))),t.createElement(i,{label:"密码",hasFeedback:!0,help:s("password")?"校验中...":(o("password")||[]).join(", ")},t.createElement(a.Input,r({type:"password",placeholder:"请输入密码",defaultValue:"admin"},c))),t.createElement(a.Button,{type:"primary",htmlType:"submit"},"登录"))}});s=a.Form.create()(s),e.exports=s}).call(this)}finally{}}).call(t,n(2),n(4))},521:function(e,t,n){var o=n(250);"string"==typeof o&&(o=[[e.id,o,""]]),n(93)(o,{}),o.locals&&(e.exports=o.locals)},522:function(e,t,n){e.exports=n.p+"b3d1c2bb608d17757ad39aaf6bd865fb.png"}});
//# sourceMappingURL=login.bundle.js.map