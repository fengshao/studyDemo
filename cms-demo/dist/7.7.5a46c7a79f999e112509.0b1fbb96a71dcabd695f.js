webpackJsonp([7],{214:function(t,e,i){try{(function(){"use strict";function e(){this.generateActions("getSpecalTypeList","editSpecialType","showEditFrom","showAddFrom","hideEditFrom"),this.getSpecalTypeList=function(t){var e=this;a.getSpecalTypeList().then(function(i){e.dispatch(i.data),t&&o.getNewLeftMenu(i.data)},function(t){e.dispatch(t)})},this.editSpecialType=function(t){var e=this;a.editSpecialType(t).then(function(t){e.actions.getSpecalTypeList(!0)},function(t){e.dispatch(t)})}}var a=i(7),o=i(132);t.exports=alt.createActions(e)}).call(this)}finally{}},487:function(t,e,i){(function(e){try{(function(){"use strict";var a=i(490),o=i(489),n=i(488),s=i(214),r=e.createClass({displayName:"SpecialTypeList",getInitialState:function(){var t=n.getState();return t},onChange:function(){var t=n.getState();this.setState(t)},componentDidMount:function(){n.listen(this.onChange),s.getSpecalTypeList()},componentWillUnmount:function(){n.unlisten(this.onChange),alt.flush()},events:{deleteSpecialFnc:function(t){s.deleteSpecial(t.id)},showEditFrom:function(t){s.showEditFrom(t)},showAddFrom:function(){s.showAddFrom()},editSpecialType:function(t){s.editSpecialType(t)},hideEditFrom:function(){s.hideEditFrom()}},render:function(){var t=window.sessionStorage.getItem("user_role"),i=1==t?"专题模块列表(品牌设置，主打活动，专题列表位置不会改变，不会隐藏，此处不予以展示)":"专题模块列表";return e.createElement("div",{className:"special-type-list-div"},this.state.isShowEditFrom||this.state.isShowAddFrom?e.createElement(o,{hideEditFrom:this.events.hideEditFrom,editSpecialType:this.events.editSpecialType,allData:this.state.speciaTypelList,editRowData:this.state.editRowData}):e.createElement(a,{tableData:this.state.speciaTypelList,titleData:i,showEditFrom:this.events.showEditFrom,showAddFrom:this.events.showAddFrom}))}});t.exports=r}).call(this)}finally{}}).call(e,i(2))},488:function(t,e,i){(function(e){try{(function(){"use strict";function a(){this.speciaTypelList=[],this.editRowData={id:"",parent_id:"",status:"",type_en:"",type_name:"",update_time:"",sort:""},this.isShowEditFrom=!1,this.isShowAddFrom=!1,this.bindActions(o)}var o=i(214);a.prototype.getSpecalTypeList=function(t){var i=this;this.editRowData={id:"",parent_id:"",status:"",type_en:"",type_name:"",update_time:"",sort:""},this.isShowEditFrom=!1,this.isShowAddFrom=!1,i.speciaTypelList=[],e.each(t,function(t,e){1!=e.id&&2!=e.id&&5!=e.id&&i.speciaTypelList.push(e)})},a.prototype.showEditFrom=function(t){this.editRowData=t,this.isShowEditFrom=!0},a.prototype.showAddFrom=function(){this.editRowData={id:"",parent_id:"",status:"",type_en:"",type_name:"",update_time:"",sort:""},this.isShowAddFrom=!0},a.prototype.hideEditFrom=function(){this.editRowData={id:"",parent_id:"",status:"",type_en:"",type_name:"",update_time:"",sort:""},this.isShowEditFrom=!1,this.isShowAddFrom=!1},t.exports=alt.createStore(a,"SpecialTypeListStore")}).call(this)}finally{}}).call(e,i(4))},489:function(t,e,i){(function(e,a){try{(function(){"use strict";var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},n=i(3),s=n.Form.Item,r=n.Radio.Group,l=e.createClass({displayName:"EditForm",getInitialState:function(){return{imgSrc:this.props.editRowData.img_wechat}},componentWillUnmount:function(){a("body").css("overflow","hidden")},componentDidMount:function(){a("body").css("overflow","auto")},confirm:function(t){this.props.deleteSpecialFnc(t)},checkSpecialSort:function(t,e,i){/^\d+$/.test(e)||i([new Error("抱歉，请输入数字。")]);for(var a=!1,o=0;o<this.props.allData.length;o++)if(e==this.props.allData[o].sort&&this.props.editRowData.id!=this.props.allData[o].id){a=!0;break}a?i([new Error("抱歉，该排序序号已被占用。")]):i()},checkSpeciaTypelName:function(t,e,i){for(var a=!1,o=0;o<this.props.allData.length;o++)if(e==this.props.allData[o].type_name&&this.props.editRowData.type_id!=this.props.allData[o].type_id){a=!0;break}a?i([new Error("抱歉，该专题模块名称已被占用。")]):i()},saveSpecial:function(){var t=this;this.props.form.validateFields(function(e,i){var o=!1;a.each(i,function(e,i){i!=t.props.editRowData[e]&&(o=!0)}),!e&&o&&(i.id=t.props.editRowData.id,t.props.editSpecialType(i))})},render:function(){var t=this.props.form,i=t.getFieldProps,a=t.getFieldError,l=t.isFieldValidating,p=i("type_name",{rules:[{required:!0,max:20,message:"专题模块名称最多为 20 个字符"},{validator:this.checkSpeciaTypelName}],initialValue:this.props.editRowData.type_name?this.props.editRowData.type_name:""}),c=i("sort",{rules:[{required:!0,message:"排序不能为空"},{validator:this.checkSpecialSort}],initialValue:this.props.editRowData.sort?this.props.editRowData.sort.toString():this.props.editRowData.sort}),d=i("status",{rules:[{required:!0,message:"请选择是否展示模块"}],initialValue:this.props.editRowData.status?this.props.editRowData.status.toString():"0"}),h={labelCol:{span:7},wrapperCol:{span:12}};return e.createElement("div",null,e.createElement(n.Form,{horizontal:!0,className:"editform"},e.createElement(s,o({},h,{label:"模块名称",hasFeedback:!0,help:l("type_name")?"校验中...":(a("type_name")||[]).join(", ")}),e.createElement(n.Input,o({placeholder:"请输入专题模块名称"},p))),e.createElement(s,o({},h,{label:"排序",hasFeedback:!0,help:l("sort")?"校验中...":(a("sort")||[]).join(", ")}),e.createElement(n.Input,o({placeholder:"请输入排序序号"},c))),e.createElement(s,o({},h,{label:"是否展示模块"}),e.createElement(r,d,e.createElement(n.Radio,{value:"0"},"展示"),e.createElement(n.Radio,{value:"1"},"隐藏"))),e.createElement(s,{wrapperCol:{span:12,offset:7}},e.createElement(n.Button,{type:"primary",onClick:this.saveSpecial},"确定"),"   ",e.createElement(n.Button,{type:"ghost",onClick:this.props.hideEditFrom},"返回"))))}});l=n.Form.create()(l),t.exports=l}).call(this)}finally{}}).call(e,i(2),i(4))},490:function(t,e,i){(function(e,a){try{(function(){"use strict";var o=i(3),n=e.createClass({displayName:"TableComponent",getInitialState:function(){return{tableHeight:a(window).height()-56-30-130-80}},resizeWindow:function(){var t=a(window).height()-56-30-130-80;this.setState({tableHeight:t})},componentWillUnmount:function(){a("body").css("overflow","auto"),a(window).off("resize",this.resizeWindow)},getTableColumns:function(){var t=this,i=[{title:"ID",dataIndex:"id",width:"10%",key:"id_key",sorter:function(t,e){return t.id-e.id}},{title:"专题模块名称",dataIndex:"type_name",width:"30%",key:"title_key"},{title:"是否展示",dataIndex:"status",width:"25%",key:"status_key",render:function(t){return 0==t?"展示":"隐藏"}},{title:"排序",dataIndex:"sort",width:"15%",key:"sort_key",sorter:function(t,e){return t.sort-e.sort}},{title:"操作",width:"20%",render:function(i,a,n){return e.createElement("div",{className:"operate-div"},e.createElement(o.Button,{className:"operate-btn",type:"primary",onClick:t.props.showEditFrom.bind(t,a)},"修改"))}}];return i},getPagination:function(){return{total:this.props.tableData.length,showTotal:function(t){return"共 "+t+" 条"},defaultCurrent:1,pageSize:10,showQuickJumper:!0,showSizeChanger:!0}},componentDidMount:function(){a("body").css("overflow","hidden"),a(window).on("resize",this.resizeWindow)},titleElement:function(){return e.createElement("div",null,e.createElement("span",null,this.props.titleData))},render:function(){var t=this.getTableColumns(),i=this.getPagination(),a=this.props.tableData,n=this.state.tableHeight,s=this.titleElement();return e.createElement(o.Table,{title:function(){return s},bordered:!0,columns:t,dataSource:a,pagination:i,scroll:{y:n}})}});t.exports=n}).call(this)}finally{}}).call(e,i(2),i(4))}});
//# sourceMappingURL=7.7.5a46c7a79f999e112509.0b1fbb96a71dcabd695f.js.map